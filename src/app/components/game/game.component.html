<div class="header">
    <app-copyright class="copyright"></app-copyright>
    <button 
        class="button button-new-game" 
        (click)="startNewGame()">
        New game
    </button>
</div>
<div class="form-shots">
    <div class="shots-container">
        <div class="shots-header">
            <p 
                class="shots-number text" 
                *appFor="game.dartInMove; index as i">
                Dart {{i + 1}}
            </p>
        </div>
        <form [formGroup]="pointsForm">
            <div 
                class="form-array" 
                formArrayName="playersShots">
                <div 
                    class="form-container" 
                    *ngFor="let player of game.players; index as i" 
                    [formGroupName]="i">
                    <p class="shot-username text">
                        {{player.username}}
                    </p>
                    <div 
                        class="form-group" 
                        *appFor="game.dartInMove; index as j" 
                        [formGroupName]="j">
                        <input 
                            type="number" 
                            class="form-input" 
                            formControlName="shot"/>
                        <div class="shot-factor-container">
                            <div class="shot-radio-container">
                                <input 
                                    [attr.id]="'radio1' + i + j"
                                    type="radio" 
                                    formControlName="factor" 
                                    [value]=1/>
                                <label [attr.for]="'radio1' + i + j">
                                    1x
                                </label>
                            </div>
                            <div class="shot-radio-container">
                                <input 
                                    [attr.id]="'radio2' + i + j" 
                                    type="radio" 
                                    formControlName="factor" 
                                    [value]=2/>
                                <label [attr.for]="'radio2' + i + j">2x</label>
                            </div>
                            <div class="shot-radio-container">
                                <input 
                                    [attr.id]="'radio3' + i + j" 
                                    type="radio" 
                                    formControlName="factor" 
                                    [value]=3/>
                                <label [attr.for]="'radio3' + i + j" class="shot-last-label">3x</label>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </form>
    </div>
    <button 
        class="button button-add" 
        (click)="saveShots()" 
        [disabled]="isEndGame">
        Add
    </button>
</div>
<div class="game-board">
    <div class="game-username-container">
        <p 
            class="text game-username" 
            *ngFor="let player of game.players; index as i"
            [ngClass]="{'lider': game.points[0][i] === closestPoint}">
            {{player.username}}
        </p>
    </div>
    <div 
        class="game-row" 
        *ngFor="let points of game.points; index as i">
        <p 
            class="text game-move-number" 
            *ngIf="(game.points.length - i - 1) !== 0">
            {{game.points.length - i - 1}}
        </p>
        <div class="game-row-result">
            <div 
                class="game-point" 
                *ngFor="let point of points; index as j">
                <p 
                    class="game-point"
                    *ngIf="moveIndexInfo !== i">
                    {{point}}
                </p>
                <p 
                    class="game-point"
                    *ngIf="moveIndexInfo === i">
                    {{moveInfo[j]}}
                </p>
            </div>
        </div>
        <button 
            class="text game-info" 
            *ngIf="(game.points.length - i - 1) !== 0" 
            (mousedown)="getMoveInfo(i)" 
            (mouseup)="getMoveInfo(null)">
            &#9432;
        </button>
    </div>
</div>
<app-winner-popup 
    *ngIf="isEndGame" 
    [winners]="winners" 
    (restart)="restart()">
</app-winner-popup>